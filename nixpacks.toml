# nixpacks.toml â€” Fixed & Optimized for FF Tech SaaS (app.py)
# Railway Nixpacks | PostgreSQL support for psycopg2-binary

[phases.setup]
# Correct Nix packages: postgresql provides libpq + headers
nixPkgs = ["python312", "gcc", "postgresql", "pkg-config"]

[phases.install]
# Create venv and install dependencies
cmds = [
  "python3 -m venv .venv",
  ".venv/bin/pip install --upgrade pip setuptools wheel",
  ".venv/bin/pip install -r requirements.txt"
]

[phases.build]
# No build commands needed
cmds = []

[start]
# Start uvicorn with proper host/port
cmd = ".venv/bin/uvicorn app:app --host 0.0.0.0 --port $PORT --workers 1"
