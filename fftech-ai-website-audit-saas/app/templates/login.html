
{% extends 'base.html' %}
{% block content %}
<h2>Sign in</h2>
<form id="f" class="row g-2" onsubmit="return false;">
  <div class="col-6"><input type="email" id="email" class="form-control" placeholder="you@example.com" required></div>
  <div class="col-3 d-grid"><button class="btn btn-primary" onclick="send()">Send Magic Link</button></div>
</form>
<div id="msg" class="mt-3"></div>
<script>
async function send(){
  msg.innerHTML = '<div class="alert alert-info">Sendingâ€¦</div>';
  const res = await fetch('/api/auth/request-link', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({email: email.value})});
  const data = await res.json();
  msg.innerHTML = '<div class="alert alert-success">If the email exists, a sign-in link has been sent.</div>';
}
</script>
{% endblock %}
