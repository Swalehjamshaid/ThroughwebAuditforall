<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF TECH | Elite Strategic Intelligence 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary: #3b82f6; --dark: #020617; --glass: rgba(15, 23, 42, 0.9); }
        body { background: var(--dark); color: #f8fafc; font-family: sans-serif; }
        .glass { background: var(--glass); backdrop-filter: blur(24px); border: 1px solid rgba(255,255,255,0.08); border-radius: 32px; }
    </style>
</head>
<body class="p-12 min-h-screen">
    <div class="max-w-7xl mx-auto space-y-12">
        <header class="text-center space-y-6">
            <h1 class="text-5xl font-black">FF TECH <span class="text-blue-500">ELITE</span></h1>
            <div class="glass p-4 max-w-3xl mx-auto flex gap-4">
                <input id="urlInput" type="url" placeholder="Enter target URL..." class="flex-1 bg-transparent p-4 outline-none">
                <button onclick="runAudit()" class="bg-blue-600 px-10 py-4 rounded-2xl font-bold">START SCAN</button>
            </div>
        </header>

        <div id="results" class="hidden space-y-10">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-4 glass p-10 flex flex-col items-center justify-center">
                    <span id="totalGradeNum" class="text-6xl font-black">0%</span>
                </div>
                <div class="lg:col-span-8 glass p-10">
                    <h3 class="text-3xl font-black mb-6">Strategic Overview</h3>
                    <div id="summary" class="text-slate-300 leading-relaxed text-lg pl-6"></div>
                    <button onclick="downloadPDF()" id="pdfBtn" class="mt-8 bg-white text-black px-10 py-4 rounded-2xl font-black">EXPORT PDF REPORT</button>
                </div>
            </div>
            <div id="metricsGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>
        </div>
    </div>
    <script>
        let reportData = null;
        async function runAudit() {
            const url = document.getElementById('urlInput').value.trim();
            if(!url) return;
            try {
                const res = await fetch('/audit', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({url}) });
                reportData = await res.json();
                document.getElementById('totalGradeNum').textContent = reportData.total_grade + '%';
                document.getElementById('summary').textContent = reportData.summary;
                const grid = document.getElementById('metricsGrid');
                grid.innerHTML = '';
                reportData.metrics.forEach(m => {
                    grid.innerHTML += `<div class="glass p-6"><h4>${m.name}</h4><span class="font-black">${m.score}%</span></div>`;
                });
                document.getElementById('results').classList.remove('hidden');
            } catch(e) { alert('Audit failed'); }
        }
        async function downloadPDF() {
            if(!reportData) return;
            const btn = document.getElementById('pdfBtn'); btn.textContent = 'Generating...';
            const res = await fetch('/download', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(reportData) });
            const blob = await res.blob();
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'FFTech_Elite_Audit.pdf'; a.click();
            btn.textContent = 'EXPORT PDF REPORT';
        }
    </script>
</body>
</html>
