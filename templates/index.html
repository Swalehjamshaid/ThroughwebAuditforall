<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FF TECH ELITE v3 - Ultimate World-Class Website Audit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#10b981',
            accent: '#14b8a6',
            darkbg: '#0f172a',
            cardbg: '#1e293b',
            purpledark: '#4c1d95',
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-20px)' } }
          }
        }
      }
    }
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    .progress-ring circle { transition: stroke-dashoffset 1s ease-in-out; }
    .glass { background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.15); }
    table { width: 100%; border-collapse: separate; border-spacing: 0 12px; }
    th { background: rgba(16, 185, 129, 0.2); font-weight: 600; padding: 16px; }
    td { background: rgba(255, 255, 255, 0.05); padding: 16px; }
    .priority-badge { padding: 6px 16px; border-radius: 9999px; font-weight: bold; text-transform: uppercase; font-size: 0.875rem; }
    .tab-btn.active { @apply bg-primary text-white; }
    .tab-btn { @apply px-8 py-4 rounded-xl transition hover:bg-primary/50; }
    .coming-soon { opacity: 0.6; pointer-events: none; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-darkbg via-purpledark to-black text-white">
  <!-- Hero Section -->
  <div class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20"></div>
    <div class="relative container mx-auto px-6 py-32 text-center">
      <h1 class="text-6xl md:text-8xl font-extrabold mb-8 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent animate-float">
        FF TECH ELITE v3
      </h1>
      <p class="text-2xl md:text-3xl text-gray-300 mb-12 max-w-5xl mx-auto">
        The World's Most Advanced Website Audit Engine – 300+ Checks
      </p>
      <div class="flex flex-col lg:flex-row gap-6 justify-center items-center max-w-4xl mx-auto">
        <input id="urlInput" type="url" placeholder="Enter website URL (e.g. https://haier.com.pk)" class="w-full px-8 py-5 rounded-2xl bg-white/10 glass border border-white/30 focus:outline-none focus:border-primary text-xl"/>
        <div class="flex gap-4">
          <button id="modeDesktop" class="px-8 py-5 rounded-2xl bg-primary hover:bg-primary/80 transition font-bold text-lg"><i class="fas fa-desktop mr-3"></i>Desktop</button>
          <button id="modeMobile" class="px-8 py-5 rounded-2xl bg-cardbg hover:bg-cardbg/80 transition font-bold text-lg"><i class="fas fa-mobile-alt mr-3"></i>Mobile</button>
        </div>
        <button id="auditBtn" class="px-12 py-5 rounded-2xl bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 font-extrabold text-2xl shadow-2xl transform hover:scale-105 transition">
          Start Full Audit
        </button>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div id="loading" class="hidden container mx-auto px-6 py-40 text-center">
    <div class="w-40 h-40 mx-auto mb-12 rounded-full bg-gradient-to-r from-primary to-accent p-2 animate-pulse-slow">
      <div class="w-full h-full rounded-full bg-darkbg flex items-center justify-center"><i class="fas fa-search-dollar text-7xl text-primary"></i></div>
    </div>
    <h2 class="text-5xl font-bold mb-6">Analyzing Website...</h2>
    <p class="text-2xl text-gray-400">Running 300+ world-class checks across all categories</p>
  </div>

  <!-- Results - Initially Hidden, Shows After Audit -->
  <div id="results" class="hidden container mx-auto px-6 py-16 max-w-7xl">
    <!-- Audit Header -->
    <div class="text-center mb-16">
      <h2 class="text-5xl font-bold mb-4">Audit Complete</h2>
      <p class="text-2xl text-gray-300" id="auditedUrl">—</p>
      <p class="text-xl text-gray-500 mt-2" id="auditedAt">—</p>
    </div>

    <!-- Overall Score & Pillars -->
    <div class="grid lg:grid-cols-5 gap-10 mb-20">
      <div class="lg:col-span-2"></div>
      <div class="lg:col-span-1 text-center relative">
        <svg class="w-80 h-80 mx-auto -rotate-90">
          <circle cx="160" cy="160" r="140" stroke="#334155" stroke-width="40" fill="none"/>
          <circle id="overallRing" cx="160" cy="160" r="140" stroke="url(#gradOverall)" stroke-width="40" fill="none" stroke-dasharray="880" stroke-dashoffset="880"/>
          <defs><linearGradient id="gradOverall"><stop offset="0%" stop-color="#10b981"/><stop offset="100%" stop-color="#14b8a6"/></linearGradient></defs>
        </svg>
        <div class="absolute inset-0 flex flex-col items-center justify-center">
          <span id="overallScore" class="text-8xl font-extrabold text-primary">—</span>
          <span class="text-3xl text-gray-400 mt-4">Overall Health Score</span>
        </div>
      </div>
      <div class="grid grid-cols-2 lg:grid-cols-1 gap-8 lg:col-span-2">
        <div class="glass rounded-3xl p-8 text-center">
          <h3 class="text-3xl font-bold">Performance</h3>
          <p class="text-5xl font-extrabold text-primary mt-4 pillar-score" data-pillar="Performance">—</p>
          <p class="text-2xl text-gray-400 mt-2">40% Weight</p>
        </div>
        <div class="glass rounded-3xl p-8 text-center">
          <h3 class="text-3xl font-bold">SEO</h3>
          <p class="text-5xl font-extrabold text-primary mt-4 pillar-score" data-pillar="SEO">—</p>
          <p class="text-2xl text-gray-400 mt-2">30% Weight</p>
        </div>
        <div class="glass rounded-3xl p-8 text-center">
          <h3 class="text-3xl font-bold">UX</h3>
          <p class="text-5xl font-extrabold text-primary mt-4 pillar-score" data-pillar="UX">—</p>
          <p class="text-2xl text-gray-400 mt-2">20% Weight</p>
        </div>
        <div class="glass rounded-3xl p-8 text-center">
          <h3 class="text-3xl font-bold">Security</h3>
          <p class="text-5xl font-extrabold text-primary mt-4 pillar-score" data-pillar="Security">—</p>
          <p class="text-2xl text-gray-400 mt-2">10% Weight</p>
        </div>
      </div>
    </div>

    <!-- Core Web Vitals -->
    <div class="glass rounded-3xl p-12 mb-20">
      <h3 class="text-4xl font-bold text-center mb-12">Core Web Vitals</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-10 text-center">
        <div><p class="text-gray-400 text-xl">LCP</p><p id="lcp" class="text-5xl font-bold text-primary">—</p></div>
        <div><p class="text-gray-400 text-xl">FCP</p><p id="fcp" class="text-5xl font-bold text-primary">—</p></div>
        <div><p class="text-gray-400 text-xl">CLS</p><p id="cls" class="text-5xl font-bold text-primary">—</p></div>
        <div><p class="text-gray-400 text-xl">TBT/INP</p><p id="tbt" class="text-5xl font-bold text-primary">—</p></div>
      </div>
    </div>

    <!-- Metrics Table (Empty Initially) -->
    <div class="glass rounded-3xl overflow-hidden mb-20">
      <h3 class="text-4xl font-bold p-10 bg-gradient-to-r from-primary to-accent">300+ Advanced Metrics</h3>
      <div class="overflow-x-auto p-8">
        <table>
          <thead><tr><th>#</th><th>Metric</th><th>Category</th><th>Score</th></tr></thead>
          <tbody id="metricsTable">
            <!-- Filled by JS after audit -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Improvement Roadmap (Empty Initially) -->
    <div class="glass rounded-3xl p-12 mb-20">
      <h3 class="text-4xl font-bold mb-10">Improvement Roadmap</h3>
      <div id="roadmap" class="prose prose-xl prose-invert">—</div>
    </div>

    <!-- In-Depth SEO Audit Section (Hidden until haier.com.pk or future data) -->
    <div id="seoAuditSection" class="hidden">
      <h2 class="text-5xl font-extrabold text-center mb-16 text-primary">Professional In-Depth SEO Audit</h2>
      <!-- Tabs and all tables with empty rows initially -->
      <!-- Same structure as previous, but all tables start empty -->
    </div>

    <!-- Advanced Modules (Open Links - Clickable but Show Empty/Placeholder When Accessed) -->
    <div class="container mx-auto px-6 py-20">
      <h2 class="text-4xl font-bold text-center mb-12">Advanced Audit Modules</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
        <a href="/audit?module=structured-data" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-code text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">Structured Data Audit</h3>
          <p class="text-gray-400">Schema validation, rich results, JSON-LD errors</p>
        </a>
        <a href="/audit?module=international" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-globe text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">International SEO</h3>
          <p class="text-gray-400">Hreflang, language tags, geo-targeting</p>
        </a>
        <a href="/audit?module=pwa" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-mobile-alt text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">PWA Audit</h3>
          <p class="text-gray-400">Manifest, service worker, offline capability</p>
        </a>
        <a href="/audit?module=security-deep" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-shield-alt text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">Deep Security Scan</h3>
          <p class="text-gray-400">Vulnerable libraries, GDPR, SRI, cookies</p>
        </a>
        <a href="/audit?module=content" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-file-alt text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">Content Quality Audit</h3>
          <p class="text-gray-400">Duplicates, thin content, readability, cannibalization</p>
        </a>
        <a href="/audit?module=log-analysis" class="glass rounded-3xl p-12 hover:scale-105 transition text-center block">
          <i class="fas fa-file-lines text-6xl text-primary mb-6"></i>
          <h3 class="text-3xl font-bold mb-4">Log File & Crawl Analysis</h3>
          <p class="text-gray-400">Crawl budget, orphans, redirect chains</p>
        </a>
      </div>
    </div>

    <!-- PDF Download (Hidden Until Audit Complete) -->
    <div id="pdfSection" class="hidden text-center my-24">
      <button id="downloadPdf" class="px-16 py-8 rounded-3xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 font-extrabold text-3xl shadow-2xl transform hover:scale-110 transition flex items-center gap-6 mx-auto">
        <i class="fas fa-file-pdf text-5xl"></i> Download Full Professional Report (PDF)
      </button>
    </div>
  </div>

  <script>
    const auditBtn = document.getElementById('auditBtn');
    const loading = document.getElementById('loading');
    const results = document.getElementById('results');
    const pdfSection = document.getElementById('pdfSection');
    let currentData = null;

    // Mode toggle
    document.getElementById('modeDesktop').onclick = () => switchMode('desktop');
    document.getElementById('modeMobile').onclick = () => switchMode('mobile');

    function switchMode(mode) {
      const desk = document.getElementById('modeDesktop');
      const mob = document.getElementById('modeMobile');
      if (mode === 'desktop') {
        desk.classList.add('bg-primary'); mob.classList.remove('bg-primary');
        desk.classList.remove('bg-cardbg'); mob.classList.add('bg-cardbg');
      } else {
        mob.classList.add('bg-primary'); desk.classList.remove('bg-primary');
        mob.classList.remove('bg-cardbg'); desk.classList.add('bg-cardbg');
      }
    }

    auditBtn.onclick = async () => {
      const url = document.getElementById('urlInput').value.trim();
      if (!url) return alert('Please enter a URL');

      loading.classList.remove('hidden');
      results.classList.add('hidden');
      pdfSection.classList.add('hidden');
      auditBtn.disabled = true;
      auditBtn.textContent = 'Auditing...';

      try {
        const mode = document.getElementById('modeMobile').classList.contains('bg-primary') ? 'mobile' : 'desktop';
        const res = await fetch('/audit', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url, mode })
        });

        if (!res.ok) throw new Error(await res.text() || 'Audit failed');
        currentData = await res.json();

        // Show results with real data
        document.getElementById('auditedUrl').textContent = currentData.url;
        document.getElementById('auditedAt').textContent = currentData.audited_at;
        document.getElementById('overallScore').textContent = currentData.total_grade + '%';
        // ... populate rings, pillars, vitals, metrics table, roadmap, SEO audit ...

        pdfSection.classList.remove('hidden');
      } catch (err) {
        alert('Error: ' + err.message);
      } finally {
        loading.classList.add('hidden');
        results.classList.remove('hidden');
        auditBtn.disabled = false;
        auditBtn.textContent = 'Start Full Audit';
      }
    };

    // PDF Download
    document.getElementById('downloadPdf').onclick = async () => {
      if (!currentData) return;
      const res = await fetch('/download', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(currentData)
      });
      if (res.ok) {
        const blob = await res.blob();
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `FF_ELITE_Audit_${Date.now()}.pdf`;
        a.click();
      }
    };

    // Open Links Behavior: When clicked directly (e.g. /audit?module=structured-data), show empty template
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('module')) {
      results.classList.remove('hidden');
      document.getElementById('auditedUrl').textContent = 'Advanced Module: ' + urlParams.get('module').replace('-', ' ').toUpperCase();
      document.getElementById('overallScore').textContent = '—';
      // All tables remain empty – ready for future Python data
    }
  </script>
</body>
</html>
