<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF Tech | AI-Powered Website Audit Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent: #00f2ff;
            --accent-dark: #0062ff;
            --green: #00ff88;
            --yellow: #ffbb00;
            --red: #ff4d4d;
        }
        body {
            background: radial-gradient(circle at top right, #1a1a2e, #0f0f1a, #050505);
            color: #e0e0e0;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            transition: all 0.4s ease;
        }
        .glass-card:hover {
            border-color: rgba(0, 242, 255, 0.4);
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.15);
        }
        .grade-badge {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            font-size: 5rem;
            filter: drop-shadow(0 0 15px rgba(0, 242, 255, 0.6));
        }
        .metric-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            box-shadow: 0 0 12px currentColor;
        }
        .dot-green { background: var(--green); }
        .dot-yellow { background: var(--yellow); }
        .dot-red { background: var(--red); animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .category-header {
            background: linear-gradient(90deg, rgba(0,242,255,0.15), transparent);
            border-left: 5px solid var(--accent);
        }
    </style>
</head>
<body class="p-6 lg:p-12">

    <!-- AUTH GATE: Shown if user not authenticated -->
    <div id="auth-gate" class="fixed inset-0 bg-black/90 backdrop-blur-lg z-50 flex items-center justify-center">
        <div class="glass-card p-12 max-w-lg w-full mx-4 shadow-2xl">
            <h2 class="text-4xl font-black text-center mb-10 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
                Unlock Premium Audit Report
            </h2>

            <div id="login-form">
                <input type="email" id="login-email" placeholder="Your Email" class="w-full px-6 py-4 mb-4 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-400 text-white">
                <input type="password" id="login-password" placeholder="Access Code (if provided)" class="w-full px-6 py-4 mb-8 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-400 text-white">
                <button id="btn-login" class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-black font-bold py-5 rounded-xl text-lg transition shadow-lg">
                    Access Full Report
                </button>
                <p class="text-center mt-6 text-sm opacity-70">
                    Need access? <a href="#" id="link-register" class="text-cyan-400 underline font-bold">Request Paid Report</a>
                </p>
            </div>

            <div id="register-form" class="hidden">
                <input type="text" placeholder="Full Name" class="w-full px-6 py-4 mb-4 bg-white/5 border border-white/10 rounded-xl text-white">
                <input type="email" id="reg-email" placeholder="Business Email" class="w-full px-6 py-4 mb-8 bg-white/5 border border-white/10 rounded-xl text-white">
                <button id="btn-register" class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-black font-bold py-5 rounded-xl text-lg transition shadow-lg">
                    Send Paid Access Link via Email
                </button>
                <p class="text-center mt-6 text-sm opacity-70">
                    <a href="#" id="link-back-login" class="text-cyan-400 underline">Back to Login</a>
                </p>
            </div>

            <div id="auth-message" class="mt-6 text-center font-bold"></div>
        </div>
    </div>

    <!-- MAIN REPORT CONTENT (hidden until authenticated) -->
    <div id="report-content" class="max-w-7xl mx-auto hidden">

        <nav class="flex justify-between items-center mb-12">
            <div class="text-4xl font-black tracking-tighter">FF <span class="text-cyan-400">TECH</span></div>
            <div class="flex items-center gap-10">
                <span class="text-sm opacity-60">Audit ID: <span id="audit-id">Loading...</span></span>
                <button id="btn-download-pdf" class="bg-cyan-500 hover:bg-cyan-600 text-black font-bold py-4 px-10 rounded-full text-lg transition shadow-lg shadow-cyan-500/40">
                    Download PDF Certificate
                </button>
            </div>
        </nav>

        <!-- OVERALL SITE HEALTH -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-10 mb-16">
            <div class="glass-card p-12 text-center flex flex-col justify-center">
                <h3 class="text-gray-400 uppercase tracking-widest text-sm mb-8">Overall Site Health</h3>
                <div class="relative w-72 h-72 mx-auto">
                    <svg class="w-full h-full -rotate-90">
                        <circle cx="144" cy="144" r="128" stroke="rgba(255,255,255,0.1)" stroke-width="20" fill="none"/>
                        <circle cx="144" cy="144" r="128" stroke="url(#grad)" stroke-width="20" fill="none" 
                                stroke-dasharray="804" stroke-dashoffset="804" id="health-progress" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#00f2ff"/>
                                <stop offset="100%" stop-color="#0062ff"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <div class="grade-badge" id="overall-grade">—</div>
                        <div class="text-3xl font-bold mt-2" id="overall-score">—%</div>
                        <div class="text-sm opacity-60 mt-3" id="scoring-mode">Strict Mode</div>
                    </div>
                </div>
                <p class="mt-8 text-sm text-gray-400" id="audit-date">Audit Date: Loading...</p>
            </div>

            <div class="lg:col-span-2 glass-card p-12">
                <h2 class="text-3xl font-bold mb-8 flex items-center gap-5">
                    <i class="fa-solid fa-robot text-cyan-400 text-4xl"></i> AI Executive Summary
                </h2>
                <p class="text-gray-300 leading-relaxed text-lg italic" id="executive-summary">
                    Loading analysis...
                </p>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mt-12">
                    <div class="text-center">
                        <div class="text-4xl font-bold text-red-400" id="total-errors">—</div>
                        <div class="text-sm opacity-70 mt-2">Critical Errors</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-yellow-400" id="total-warnings">—</div>
                        <div class="text-sm opacity-70 mt-2">Warnings</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-cyan-400" id="total-notices">—</div>
                        <div class="text-sm opacity-70 mt-2">Notices</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-green-400" id="crawled-pages">—</div>
                        <div class="text-sm opacity-70 mt-2">Pages Crawled</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ALL 10 CATEGORIES -->
        <section class="space-y-16">

            <!-- Category 1: Overall Site Health Details -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-heart-pulse text-cyan-400"></i> Overall Site Health
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="category-overall"></div>
            </div>

            <!-- Category 2: Crawlability & Indexation -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-spider text-cyan-400"></i> Crawlability & Indexation
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-crawlability"></div>
            </div>

            <!-- Category 3: On-Page SEO Metrics -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-file-lines text-cyan-400"></i> On-Page SEO Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-onpage"></div>
            </div>

            <!-- Category 4: Technical & Performance -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-gauge-high text-cyan-400"></i> Technical & Performance Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-performance"></div>
            </div>

            <!-- Category 5: Mobile & Usability -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-mobile-screen text-cyan-400"></i> Mobile & Usability Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-mobile"></div>
            </div>

            <!-- Category 6: Security & HTTPS -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-shield-halved text-cyan-400"></i> Security & HTTPS Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-security"></div>
            </div>

            <!-- Category 7: International SEO -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-earth-americas text-cyan-400"></i> International / Multi-language SEO
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-international"></div>
            </div>

            <!-- Category 8: Backlinks & Authority (Optional API) -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-link text-cyan-400"></i> Backlinks & Authority Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-backlinks"></div>
            </div>

            <!-- Category 9: Advanced / Thematic -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-flask text-cyan-400"></i> Advanced & Thematic Metrics
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-advanced"></div>
            </div>

            <!-- Category 10: Historical Trends -->
            <div class="category-header glass-card p-10">
                <h2 class="text-2xl font-bold mb-8 flex items-center gap-4">
                    <i class="fa-solid fa-chart-line text-cyan-400"></i> Historical Trends
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="glass-card p-8">
                        <canvas id="trend-chart-health" height="200"></canvas>
                    </div>
                    <div class="glass-card p-8">
                        <canvas id="trend-chart-cwv" height="200"></canvas>
                    </div>
                </div>
            </div>

        </section>

        <!-- Competitive Benchmark -->
        <section class="mt-20 glass-card p-12">
            <h3 class="text-3xl font-bold mb-10">Competitive Authority Benchmark</h3>
            <canvas id="benchmark-chart" height="120"></canvas>
        </section>

    </div>

    <footer class="max-w-7xl mx-auto mt-32 pt-12 border-t border-white/10 text-center opacity-40 text-sm">
        © 2025 FF Tech International. Advanced AI-Powered Website Auditing Platform.
    </footer>

    <script>
        // Placeholder for Python-injected data
        window.auditData = null;

        // Function to render a single metric card
        function createMetric(name, value, status = 'green') {
            const div = document.createElement('div');
            div.className = 'glass-card p-6 hover:scale-105 transition';
            div.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <span class="text-sm opacity-90 leading-tight">${name}</span>
                    <span class="metric-dot dot-${status}"></span>
                </div>
                <div class="text-2xl font-bold text-right">${value}</div>
            `;
            return div;
        }

        // Main function to populate entire report
        function renderReport(data) {
            // Hide auth, show report
            document.getElementById('auth-gate').classList.add('hidden');
            document.getElementById('report-content').classList.remove('hidden');

            // Overall
            document.getElementById('audit-id').textContent = data.audit_id || '#FF-XXXXX';
            document.getElementById('audit-date').textContent = `Audit Date: ${data.date || 'December 26, 2025'}`;
            document.getElementById('overall-grade').textContent = data.grade || '—';
            document.getElementById('overall-score').textContent = `${data.score}%` || '—%';
            document.getElementById('scoring-mode').textContent = data.strict_mode ? 'Strict Mode Active' : 'Standard Mode';

            const circumference = 804;
            const offset = circumference - (data.score / 100) * circumference;
            document.getElementById('health-progress').style.strokeDashoffset = offset;

            document.getElementById('executive-summary').innerHTML = data.summary || 'Loading...';
            document.getElementById('total-errors').textContent = data.errors || '—';
            document.getElementById('total-warnings').textContent = data.warnings || '—';
            document.getElementById('total-notices').textContent = data.notices || '—';
            document.getElementById('crawled-pages').textContent = data.crawled_pages || '—';

            // Inject metrics into each category
            const categories = {
                'category-overall': data.metrics.overall || [],
                'category-crawlability': data.metrics.crawlability || [],
                'category-onpage': data.metrics.onpage || [],
                'category-performance': data.metrics.performance || [],
                'category-mobile': data.metrics.mobile || [],
                'category-security': data.metrics.security || [],
                'category-international': data.metrics.international || [],
                'category-backlinks': data.metrics.backlinks || [],
                'category-advanced': data.metrics.advanced || []
            };

            Object.keys(categories).forEach(catId => {
                const container = document.getElementById(catId);
                if (!container) return;
                container.innerHTML = '';
                categories[catId].forEach(m => {
                    container.appendChild(createMetric(m.name, m.value, m.status));
                });
            });

            // Charts (example - replace with real data)
            new Chart(document.getElementById('benchmark-chart'), {
                type: 'bar',
                data: {
                    labels: ['Your Site', 'Competitor A', 'Competitor B', 'Industry Avg'],
                    datasets: [{ label: 'Score', data: [data.score, 85, 72, 78], backgroundColor: '#00f2ff' }]
                },
                options: { responsive: true, plugins: { legend: { display: false } } }
            });
        }

        // Simulate receiving data from Python backend
        // In real app: fetch('/api/report.json') or inline <script>window.auditData = {{ data|tojson }}</script>
        // Example call:
        // renderReport(your_python_dict_converted_to_js_object);
    </script>
</body>
</html>
