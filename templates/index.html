<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<title>FF Tech Global Website Audit Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
body { font-family: 'Inter', sans-serif; }
.glass { background: rgba(15,23,42,.7); backdrop-filter: blur(12px); }
</style>
</head>

<body class="bg-gradient-to-br from-slate-950 via-slate-900 to-black text-slate-200">

<!-- ================================================= -->
<!-- HEADER -->
<!-- ================================================= -->
<header class="p-6 border-b border-slate-800 flex justify-between items-center">
<div>
<h1 class="text-3xl font-extrabold">FF Tech WebAudit™</h1>
<p class="text-slate-400 text-sm">Global 150-Metric Audit Standard</p>
</div>
<div class="space-x-4">
<button onclick="setMode('open')" class="px-4 py-2 bg-slate-800 rounded">Open Audit</button>
<button onclick="setMode('pro')" class="px-4 py-2 bg-emerald-600 rounded">Email Registration</button>
</div>
</header>

<!-- ================================================= -->
<!-- MODE BANNER -->
<!-- ================================================= -->
<section id="modeBanner" class="text-center py-4 text-sm bg-slate-900">
Open Audit Mode — Limited Metrics
</section>

<!-- ================================================= -->
<!-- INPUT -->
<!-- ================================================= -->
<section class="max-w-6xl mx-auto p-6">
<div class="glass p-6 rounded-xl grid md:grid-cols-3 gap-4">
<input id="url" placeholder="Enter Website URL"
class="p-3 rounded bg-slate-800 col-span-2">
<button onclick="startAudit()"
class="bg-indigo-600 p-3 rounded font-semibold">
Run Audit
</button>
</div>
</section>

<!-- ================================================= -->
<!-- OVERALL SCORE -->
<!-- ================================================= -->
<section class="max-w-6xl mx-auto p-6 grid md:grid-cols-4 gap-6">

<div class="glass p-6 rounded-xl text-center">
<h3 class="font-semibold">Overall Health</h3>
<canvas id="overallGauge"></canvas>
<p id="overallScore" class="text-4xl font-bold mt-2"></p>
<p id="overallGrade" class="text-sm text-slate-400"></p>
</div>

<div id="categoryScores" class="md:col-span-3 grid md:grid-cols-3 gap-4">
<!-- Injected from Python -->
</div>

</section>

<!-- ================================================= -->
<!-- METRICS -->
<!-- ================================================= -->
<section class="max-w-6xl mx-auto p-6 space-y-8" id="metricsContainer">
<!-- All categories injected here -->
</section>

<!-- ================================================= -->
<!-- FOOTER -->
<!-- ================================================= -->
<footer class="text-center text-xs text-slate-500 p-6 border-t border-slate-800">
© FF Tech WebAudit™ · ISO-Inspired · SEMrush-Comparable · Python Powered
</footer>

<!-- ================================================= -->
<!-- SCRIPT -->
<!-- ================================================= -->
<script>
let MODE = "open";

function setMode(mode){
MODE = mode;
document.getElementById("modeBanner").innerText =
mode === "open"
? "Open Audit Mode — Limited Metrics"
: "Registered Audit Mode — Full 150 Metrics Enabled";
}

function startAudit(){
const url = document.getElementById("url").value;

fetch("/api/audit",{
method:"POST",
headers:{ "Content-Type":"application/json" },
body: JSON.stringify({ url:url, mode:MODE })
})
.then(r=>r.json())
.then(data=>renderAudit(data));
}

function renderAudit(data){

/* Overall */
document.getElementById("overallScore").innerText = data.overall.score+"%";
document.getElementById("overallGrade").innerText = "Grade "+data.overall.grade;

new Chart(overallGauge,{
type:"doughnut",
data:{
datasets:[{
data:[data.overall.score,100-data.overall.score],
backgroundColor:[data.overall.color,"#1e293b"],
borderWidth:0
}]
},
options:{ cutout:"80%" }
});

/* Category Scores */
categoryScores.innerHTML="";
data.categories.forEach(c=>{
categoryScores.innerHTML+=`
<div class="glass p-4 rounded-xl text-center">
<p class="font-semibold">${c.name}</p>
<p class="text-2xl font-bold">${c.score}%</p>
<p class="text-xs text-slate-400">Grade ${c.grade}</p>
</div>`;
});

/* Metrics */
metricsContainer.innerHTML="";
data.categories.forEach(c=>{
metricsContainer.innerHTML+=`
<div class="glass p-6 rounded-xl">
<h2 class="text-xl font-bold mb-4">${c.name} Metrics</h2>
<table class="w-full text-sm">
<thead class="border-b border-slate-700">
<tr>
<th class="text-left">#</th>
<th class="text-left">Metric</th>
<th>Status</th>
<th>Impact</th>
</tr>
</thead>
<tbody>
${c.metrics.map(m=>`
<tr class="border-b border-slate-800">
<td>${m.id}</td>
<td>${m.metric}</td>
<td>${m.status}</td>
<td>${m.impact}</td>
</tr>`).join("")}
</tbody>
</table>
</div>`;
});
}
</script>

</body>
</html>
