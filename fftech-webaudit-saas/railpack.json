{
  "$schema": "https://schema.railpack.com",
  "buildAptPackages": [
    "libpq-dev",
    "build-essential"
  ],
  "steps": {
    "frontend": {
      "inputs": [
        {
          "local": true,
          "include": [
            "frontend/"
          ]
        }
      ],
      "commands": [
        "npm ci",
        "npm run build"
      ]
    },
    "backend": {
      "inputs": [
        {
          "local": true,
          "include": [
            "backend/"
          ]
        }
      ],
      "commands": [
        "pip install --no-cache-dir -r backend/requirements.txt"
      ]
    }
  },
  "deploy": {
    "startCommand": "python -m uvicorn backend.app.main:app --host 0.0.0.0 --port ${PORT}",
    "inputs": [
      {
        "step": "backend",
        "include": [
          "backend/"
        ]
      },
      {
        "step": "frontend",
        "include": [
          "frontend/dist"
        ]
      }
    ]
  }
}