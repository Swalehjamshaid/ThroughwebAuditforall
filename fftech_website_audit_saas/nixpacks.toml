# nixpacks.toml - Full WeasyPrint dependencies for Railway

[phases.setup]
nixPkgs = [
  # Core rendering libraries
  'cairo',
  'pango',
  'gdk-pixbuf',
  # GObject (this is the missing one causing the error)
  'glib',
  'gobject-introspection',
  # Font & image support
  'fontconfig',
  'freetype',
  'harfbuzz',
  'libjpeg62-turbo',
  'libpng16-16',
  # XML & extra
  'libxml2',
  'libxslt',
  # Utilities
  'shared-mime-info',
  'libffi',
  'zlib'
]

[phases.build]
cmds = [
  "pip install --no-cache-dir -r requirements.txt"
]

[start]
cmd = "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
