# nixpacks.toml - Railway build configuration for WeasyPrint & dependencies

[phases.setup]
nixPkgs = [
  # Core WeasyPrint dependencies
  'cairo',
  'pango',
  'gdk-pixbuf',
  'libffi',
  'shared-mime-info',
  # Font & image support (fixes most remaining load errors)
  'fontconfig',
  'freetype',
  'harfbuzz',
  'libjpeg62-turbo',
  'libpng16-16',
  # XML & extra utils
  'libxml2',
  'libxslt'
]

[phases.build]
cmds = [
  "pip install --no-cache-dir -r requirements.txt"
]

[start]
cmd = "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
