{% extends 'base_register.html' %}
{% set title = 'Sign In' %}
{% block form_content %}
<form id="loginForm">
  <div class="mb-3"><label class="form-label">Email</label><input type="email" class="form-control" id="email" required></div>
  <button class="btn btn-primary w-100">Send Magic Link</button>
  <p class="text-muted small mt-3">We’ll email you a secure one‑time sign‑in link.</p>
</form>
<script>
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const email = document.getElementById('email').value.trim();
  const res = await fetch('/api/auth/request-link', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({email})});
  const data = await res.json();
  alert(data.message || 'Check your email');
});
</script>
{% endblock %}