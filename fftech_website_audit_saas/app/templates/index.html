
{% extends 'layout.html' %}
{% block content %}
<nav class="navbar navbar-expand-lg border-bottom bg-body">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="#"><span class="brand">{{ brand }}</span> Audit</a>
    <button class="btn btn-sm btn-outline-secondary ms-auto" id="themeToggle">üåô/‚òÄÔ∏è</button>
  </div>
</nav>

<section class="py-5">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-7">
        <div class="card shadow-sm border-0">
          <div class="card-body p-4">
            <h1 class="h4 mb-3">Run Website Audit</h1>
            <form id="auditForm" class="row gy-2 gx-2 align-items-end">
              <div class="col-12">
                <label for="url" class="form-label">Website URL</label>
                <input type="url" class="form-control" id="url" placeholder="https://example.com" required>
              </div>
              <div class="col-12">
                <label for="competitors" class="form-label">Competitors (comma separated, optional)</label>
                <input type="text" class="form-control" id="competitors" placeholder="https://competitor1.com, https://competitor2.com">
              </div>
              <div class="col-auto"><button class="btn btn-primary">Run Audit</button></div>
              <div class="col-auto"><button class="btn btn-outline-primary" type="button" id="signinBtn">Get Sign-in Link</button></div>
              <div class="col-12 small text-muted">Open audits are not saved. Sign in via email to store history & download reports.</div>
            </form>
          </div>
        </div>
      </div>

      <div class="col-lg-5">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body p-4">
            <h2 class="h5">Status</h2>
            <ul class="small text-muted mb-0">
              <li>Open audits: public, no history</li>
              <li>Free users: up to 10 stored audits</li>
              <li>Subscribers: scheduling & long-term history</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="result" class="d-none mt-4">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted">Overall Score</span>
                <span class="badge text-bg-info" id="grade">-</span>
              </div>
              <div class="display-5 fw-bold" id="overallScore">0%</div>
              <div class="progress mt-2" role="progressbar">
                <div class="progress-bar" id="overallBar" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
              <h3 class="h6">Category Scores</h3>
              <canvas id="categoriesChart" height="120"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-4 mt-1">
        <div class="col-lg-6">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
              <h3 class="h6">HTTP Status Distribution</h3>
              <canvas id="statusChart" height="120"></canvas>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body">
              <h3 class="h6">Key On-Page Issues</h3>
              <ul class="mb-0" id="issuesList" class="small"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
